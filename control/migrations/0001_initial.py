# Generated by Django 5.2.7 on 2025-11-17 22:11

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Buque',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200, verbose_name='Nombre del Buque')),
                ('imo_number', models.CharField(help_text='Número IMO único internacional', max_length=10, unique=True, verbose_name='IMO Number')),
                ('pabellon_bandera', models.CharField(max_length=80, verbose_name='Pabellón/Bandera')),
                ('naviera', models.CharField(max_length=120, verbose_name='Naviera')),
                ('puerto_registro', models.CharField(max_length=120, verbose_name='Puerto de Registro')),
                ('callsign', models.CharField(max_length=20, verbose_name='Call Sign')),
                ('eslora_metros', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Eslora (metros)')),
                ('manga_metros', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Manga (metros)')),
                ('teu_capacidad', models.PositiveIntegerField(verbose_name='Capacidad TEU')),
                ('calado_metros', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='Calado (metros)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Buque',
                'verbose_name_plural': 'Buques',
                'ordering': ['nombre'],
                'indexes': [models.Index(fields=['imo_number'], name='control_buq_imo_num_948b77_idx'), models.Index(fields=['nombre'], name='control_buq_nombre_d155a2_idx')],
            },
        ),
        migrations.CreateModel(
            name='Arribo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha_eta', models.DateTimeField(verbose_name='ETA (Estimated Time of Arrival)')),
                ('fecha_etd', models.DateTimeField(blank=True, null=True, verbose_name='ETD (Estimated Time of Departure)')),
                ('fecha_arribo_real', models.DateTimeField(blank=True, null=True, verbose_name='Fecha de Arribo Real')),
                ('muelle_berth', models.CharField(max_length=50, verbose_name='Muelle/Berth')),
                ('tipo_operacion', models.CharField(choices=[('DESCARGA', 'Descarga (Importación)'), ('CARGA', 'Carga (Exportación)'), ('AMBOS', 'Carga y Descarga')], max_length=10, verbose_name='Tipo de Operación')),
                ('contenedores_descarga', models.PositiveIntegerField(default=0, help_text='Cantidad esperada de contenedores a descargar del buque (importación)', verbose_name='Contenedores Descarga (Import)')),
                ('contenedores_carga', models.PositiveIntegerField(default=0, help_text='Cantidad esperada de contenedores a cargar al buque (exportación)', verbose_name='Contenedores Carga (Export)')),
                ('servicios_contratados', models.CharField(max_length=120, verbose_name='Servicios Contratados')),
                ('estado', models.CharField(choices=[('PROGRAMADO', 'Programado'), ('EN_RUTA', 'En Ruta'), ('ATRACADO', 'Atracado'), ('OPERANDO', 'Operando'), ('COMPLETADO', 'Completado'), ('CANCELADO', 'Cancelado')], default='PROGRAMADO', max_length=20, verbose_name='Estado')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('buque', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='arribos', to='control.buque', verbose_name='Buque')),
            ],
            options={
                'verbose_name': 'Arribo',
                'verbose_name_plural': 'Arribos',
                'ordering': ['-fecha_eta'],
            },
        ),
        migrations.CreateModel(
            name='Contenedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('direccion', models.CharField(choices=[('IMPORT', 'Importación (Descarga)'), ('EXPORT', 'Exportación (Carga)')], help_text='Import: descarga del buque | Export: carga al buque', max_length=10, verbose_name='Dirección del Contenedor')),
                ('codigo_iso', models.CharField(help_text='Código único del contenedor (ej: ABCD1234567)', max_length=11, unique=True, verbose_name='Código ISO')),
                ('bic_propietario', models.CharField(help_text='Bureau International des Containers - Código del propietario', max_length=4, verbose_name='BIC Propietario')),
                ('tipo_tamaño', models.CharField(help_text='Ej: 20GP, 40HC, 40RF', max_length=10, verbose_name='Tipo/Tamaño')),
                ('peso_bruto_kg', models.DecimalField(decimal_places=2, help_text='VGM - Verified Gross Mass', max_digits=10, verbose_name='Peso Bruto (kg)')),
                ('tara_kg', models.DecimalField(blank=True, decimal_places=2, help_text='Peso del contenedor vacío', max_digits=10, null=True, verbose_name='Tara (kg)')),
                ('numero_sello', models.CharField(max_length=30, verbose_name='Número de Sello')),
                ('mercancia_declarada', models.CharField(max_length=255, verbose_name='Mercancía Declarada')),
                ('mercancia_peligrosa', models.BooleanField(default=False, verbose_name='Mercancía Peligrosa')),
                ('ubicacion_actual', models.CharField(help_text='Ubicación física en el puerto', max_length=50, verbose_name='Ubicación Actual')),
                ('bl_referencia', models.CharField(help_text='Bill of Lading', max_length=50, verbose_name='BL de Referencia')),
                ('fecha_retiro_transitario', models.DateTimeField(blank=True, help_text='Import: cita de retiro | Export: cita de entrega al puerto', null=True, verbose_name='Fecha de Retiro/Entrega (Cita)')),
                ('origen_pais', models.CharField(blank=True, max_length=60, null=True, verbose_name='País de Origen/Destino')),
                ('origen_puerto', models.CharField(blank=True, max_length=120, null=True, verbose_name='Puerto de Origen/Destino')),
                ('origen_remitente', models.CharField(blank=True, help_text='Import: Remitente/Exportador | Export: Consignatario', max_length=120, null=True, verbose_name='Remitente/Consignatario')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('arribo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contenedores', to='control.arribo', verbose_name='Arribo')),
            ],
            options={
                'verbose_name': 'Contenedor',
                'verbose_name_plural': 'Contenedores',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AprobacionFinanciera',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_factura', models.CharField(max_length=30, unique=True, verbose_name='Número de Factura')),
                ('monto_usd', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Monto (USD)')),
                ('servicios_facturados', models.CharField(max_length=120, verbose_name='Servicios Facturados')),
                ('fecha_emision', models.DateField(verbose_name='Fecha de Emisión')),
                ('fecha_vencimiento', models.DateField(blank=True, null=True, verbose_name='Fecha de Vencimiento')),
                ('fecha_pago', models.DateField(blank=True, null=True, verbose_name='Fecha de Pago')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('aprobado', models.BooleanField(default=False, help_text='Indica si la factura fue aprobada internamente', verbose_name='Aprobado')),
                ('ruta_documento', models.CharField(blank=True, help_text='Path o URL del PDF de la factura', max_length=255, null=True, verbose_name='Ruta del Documento')),
                ('nombre_archivo_original', models.CharField(blank=True, max_length=120, null=True, verbose_name='Nombre del Archivo Original')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('contenedor', models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='aprobacion_financiera', to='control.contenedor', verbose_name='Contenedor')),
            ],
            options={
                'verbose_name': 'Aprobación Financiera',
                'verbose_name_plural': 'Aprobaciones Financieras',
                'ordering': ['-fecha_emision'],
            },
        ),
        migrations.CreateModel(
            name='AprobacionAduanera',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_despacho', models.CharField(max_length=30, verbose_name='Número de Despacho')),
                ('fecha_revision', models.DateTimeField(blank=True, null=True, verbose_name='Fecha de Revisión')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('aprobado', models.BooleanField(default=False, help_text='Indica si la aduana aprobó el despacho', verbose_name='Aprobado')),
                ('fecha_levante', models.DateTimeField(blank=True, help_text='Fecha en que se autoriza el retiro del contenedor', null=True, verbose_name='Fecha de Levante')),
                ('ruta_documento', models.CharField(blank=True, help_text='Path o URL del documento PDF/imagen', max_length=255, null=True, verbose_name='Ruta del Documento')),
                ('nombre_archivo_original', models.CharField(blank=True, max_length=120, null=True, verbose_name='Nombre del Archivo Original')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('contenedor', models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='aprobacion_aduanera', to='control.contenedor', verbose_name='Contenedor')),
            ],
            options={
                'verbose_name': 'Aprobación Aduanera',
                'verbose_name_plural': 'Aprobaciones Aduaneras',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Queja',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email_cliente', models.EmailField(blank=True, max_length=254, verbose_name='Email del Cliente')),
                ('nombre_cliente', models.CharField(blank=True, max_length=120, verbose_name='Nombre del Cliente')),
                ('categoria', models.CharField(choices=[('DEMORA', 'Demora en Entrega'), ('DAÑO', 'Daño en Mercancía'), ('DOCUMENTACION', 'Problemas de Documentación'), ('ATENCION', 'Atención al Cliente'), ('COBRO', 'Problemas de Cobro'), ('OTRO', 'Otro')], max_length=20, verbose_name='Categoría')),
                ('estado', models.CharField(choices=[('PENDIENTE', 'Pendiente'), ('EN_REVISION', 'En Revisión'), ('RESUELTO', 'Resuelto'), ('CERRADO', 'Cerrado'), ('RECHAZADO', 'Rechazado')], default='PENDIENTE', max_length=20, verbose_name='Estado')),
                ('descripcion', models.TextField(verbose_name='Descripción')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, verbose_name='Fecha de Creación')),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Queja',
                'verbose_name_plural': 'Quejas',
                'ordering': ['-fecha_creacion'],
                'indexes': [models.Index(fields=['estado', 'fecha_creacion'], name='control_que_estado_f16db6_idx'), models.Index(fields=['categoria'], name='control_que_categor_bf73bc_idx')],
            },
        ),
        migrations.CreateModel(
            name='QuejaContenedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('observaciones_especificas', models.TextField(blank=True, help_text='Detalles específicos de este contenedor en relación a la queja', verbose_name='Observaciones Específicas')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('contenedor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quejas_relacionadas', to='control.contenedor', verbose_name='Contenedor')),
                ('queja', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contenedores_afectados', to='control.queja', verbose_name='Queja')),
            ],
            options={
                'verbose_name': 'Contenedor Afectado por Queja',
                'verbose_name_plural': 'Contenedores Afectados por Quejas',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Transitario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('razon_social', models.CharField(max_length=200, verbose_name='Razón Social')),
                ('nombre_comercial', models.CharField(blank=True, max_length=200, verbose_name='Nombre Comercial')),
                ('identificador_tributario', models.CharField(max_length=20, unique=True, verbose_name='RUC/VAT/Tax ID')),
                ('codigo_scac', models.CharField(blank=True, help_text='Standard Carrier Alpha Code', max_length=4, verbose_name='Código SCAC')),
                ('tipo_servicio', models.CharField(choices=[('NVOCC', 'NVOCC'), ('FFWD', 'Freight Forwarder'), ('TRUCKING', 'Trucking'), ('INTEGRAL', 'Servicio Integral')], max_length=20, verbose_name='Tipo de Servicio')),
                ('pais', models.CharField(max_length=60, verbose_name='País')),
                ('ciudad', models.CharField(max_length=80, verbose_name='Ciudad')),
                ('direccion', models.CharField(max_length=200, verbose_name='Dirección')),
                ('contacto_principal', models.CharField(max_length=120, verbose_name='Contacto Principal')),
                ('telefono_contacto', models.CharField(max_length=30, verbose_name='Teléfono de Contacto')),
                ('telefono_emergencia', models.CharField(blank=True, max_length=30, verbose_name='Teléfono de Emergencia')),
                ('email_contacto', models.EmailField(max_length=254, verbose_name='Email de Contacto')),
                ('email_facturacion', models.EmailField(blank=True, max_length=254, verbose_name='Email de Facturación')),
                ('sitio_web', models.URLField(blank=True, verbose_name='Sitio Web')),
                ('estado_operacion', models.CharField(choices=[('ACTIVO', 'Activo'), ('SUSPENDIDO', 'Suspendido'), ('BLOQUEADO', 'Bloqueado')], default='ACTIVO', max_length=20, verbose_name='Estado de Operación')),
                ('especialidad', models.CharField(choices=[('IMPORT', 'Importación'), ('EXPORT', 'Exportación'), ('AMBOS', 'Ambos')], max_length=20, verbose_name='Especialidad')),
                ('licencia_operador', models.CharField(blank=True, max_length=50, verbose_name='Licencia de Operador')),
                ('fecha_vencimiento_licencia', models.DateField(blank=True, null=True, verbose_name='Fecha de Vencimiento de Licencia')),
                ('zona_cobertura', models.TextField(blank=True, verbose_name='Zona de Cobertura')),
                ('limite_credito', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Límite de Crédito')),
                ('calificacion', models.IntegerField(default=5, help_text='Calificación de 1 a 5', verbose_name='Calificación')),
                ('es_activo', models.BooleanField(default=True, verbose_name='Activo')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Transitario',
                'verbose_name_plural': 'Transitarios',
                'ordering': ['razon_social'],
                'indexes': [models.Index(fields=['identificador_tributario'], name='control_tra_identif_3b5a9d_idx'), models.Index(fields=['estado_operacion', 'es_activo'], name='control_tra_estado__1ec196_idx')],
            },
        ),
        migrations.AddField(
            model_name='contenedor',
            name='transitario',
            field=models.ForeignKey(blank=True, help_text='Transitario encargado de gestionar este contenedor', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contenedores', to='control.transitario', verbose_name='Transitario'),
        ),
        migrations.CreateModel(
            name='AprobacionPagoTransitario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pago_realizado', models.BooleanField(default=False, verbose_name='Pago Realizado')),
                ('monto_pagado', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Monto Pagado (USD)')),
                ('fecha_pago', models.DateField(blank=True, null=True, verbose_name='Fecha de Pago')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('contenedor', models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='aprobacion_pago_transitario', to='control.contenedor', verbose_name='Contenedor')),
                ('transitario', models.ForeignKey(help_text='Transitario que realiza el pago', on_delete=django.db.models.deletion.PROTECT, related_name='pagos', to='control.transitario', verbose_name='Transitario')),
            ],
            options={
                'verbose_name': 'Aprobación Pago Transitario',
                'verbose_name_plural': 'Aprobaciones Pago Transitario',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='arribo',
            index=models.Index(fields=['estado', 'fecha_eta'], name='control_arr_estado_c9f959_idx'),
        ),
        migrations.AddIndex(
            model_name='arribo',
            index=models.Index(fields=['buque', 'fecha_eta'], name='control_arr_buque_i_6ced9f_idx'),
        ),
        migrations.AddIndex(
            model_name='aprobacionfinanciera',
            index=models.Index(fields=['numero_factura'], name='control_apr_numero__94b06c_idx'),
        ),
        migrations.AddIndex(
            model_name='aprobacionfinanciera',
            index=models.Index(fields=['fecha_pago'], name='control_apr_fecha_p_ad505f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='quejacontenedor',
            unique_together={('queja', 'contenedor')},
        ),
        migrations.AddIndex(
            model_name='contenedor',
            index=models.Index(fields=['codigo_iso'], name='control_con_codigo__3c2f55_idx'),
        ),
        migrations.AddIndex(
            model_name='contenedor',
            index=models.Index(fields=['arribo', 'transitario'], name='control_con_arribo__b8ab2c_idx'),
        ),
        migrations.AddIndex(
            model_name='contenedor',
            index=models.Index(fields=['bl_referencia'], name='control_con_bl_refe_33396c_idx'),
        ),
        migrations.AddIndex(
            model_name='contenedor',
            index=models.Index(fields=['direccion', 'arribo'], name='control_con_direcci_e2def6_idx'),
        ),
    ]
